services:
  cncnet-server:
    image: ghcr.io/rowtag/cncnet-server:latest
    container_name: cncnet-server
    restart: unless-stopped

    volumes:
      # Mount your appsettings.json with your configuration
      - ./appsettings.json:/app/appsettings.json:ro
      # Persistent log files
      - ./logs:/app/logs

    ports:
      - "50001:50001/udp"
      - "50000:50000/udp"
      - "50000:50000/tcp"
      - "8054:8054/udp"
      - "3478:3478/udp"
      - "1337:1337/tcp"

    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:1337/json"]
      interval: 30s
      timeout: 5s
      retries: 3
      start_period: 10s
